# MARZBAN + NGINX üöÄ

–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è VPN Marzban —Å –æ–±—Ä–∞—Ç–Ω—ã–º –ø—Ä–æ–∫—Å–∏ Nginx, SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ Let's Encrypt –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π VLESS Reality.

## üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **Marzban VPN –ø–∞–Ω–µ–ª—å** —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- ‚úÖ **MySQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** —Å —É–ª—å—Ç—Ä–∞-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –ø–∞–º—è—Ç–∏
- ‚úÖ **Nginx –æ–±—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏** —Å SSL —Ç–µ—Ä–º–∏–Ω–∞—Ü–∏–µ–π
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** —á–µ—Ä–µ–∑ Certbot
- ‚úÖ **VLESS Reality –Ω–∞ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø–æ—Ä—Ç–∞—Ö** (2053, 2083, 2087)
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π** Reality
- ‚úÖ **–ì–æ—Ç–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** –¥–ª—è –†–æ—Å—Å–∏–∏
- ‚úÖ **–£–ª—å—Ç—Ä–∞-—ç–∫–æ–Ω–æ–º–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ RAM** (~200MB –æ–±—â–µ–µ)

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –î–æ–º–µ–Ω–Ω–æ–µ –∏–º—è
**–î–æ–º–µ–Ω:** `botinger789298.work.gd`  
**IP:** `31.59.58.96`

### –ü–æ—Ä—Ç—ã
- ~~**80/443** - HTTP/HTTPS (Nginx)~~ ‚Äî –æ—Ç–∫–ª—é—á–µ–Ω–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É, —ç—Ç–∏ –ø–æ—Ä—Ç—ã –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–π Nginx —Å —Å–∞–π—Ç–æ–º
- **8080** - –ü–∞–Ω–µ–ª—å Marzban (HTTPS)
- **2053** - VLESS Reality (Google)
- **2083** - VLESS Reality (Microsoft)
- **2087** - VLESS Reality (Cloudflare)
- **3306** - MySQL (–ª–æ–∫–∞–ª—å–Ω—ã–π)

### –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** `artur789298`
- **–ü–∞—Ä–æ–ª—å:** `WARpteN789298`
- **Email:** `artur.komarovv@gmail.com`

## üíæ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ—Å—É—Ä—Å–∞–º

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **RAM:** 512MB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 1GB)
- **CPU:** 1 vCore
- **–î–∏—Å–∫:** 2GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- **–°–µ—Ç—å:** 1Mbps (–¥–ª—è –Ω–µ–±–æ–ª—å—à–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏)

### –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ:
- **MySQL:** ~80MB RAM (–≤–º–µ—Å—Ç–æ 300-500MB)
- **Marzban:** ~110MB RAM
- **Nginx:** ~5MB RAM
- **Certbot:** ~1MB RAM
- **–û–±—â–µ–µ:** ~200MB RAM (—ç–∫–æ–Ω–æ–º–∏—è 75%)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/KomarovAI/MARZBAN-NGINX.git
cd MARZBAN-NGINX
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω `botinger789298.work.gd` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ IP `31.59.58.96`:
```bash
dig botinger789298.work.gd
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install docker.io docker-compose-plugin curl openssl

# CentOS/RHEL
sudo yum install docker docker-compose curl openssl

# –ó–∞–ø—É—Å–∫ Docker
sudo systemctl enable --now docker
sudo usermod -aG docker $USER
```

### 4. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
```bash
# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x scripts/deploy.sh

# –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
./scripts/deploy.sh
```

### 5. –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
```bash
# –¢–æ–ª—å–∫–æ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (standalone, —Ç.–∫. –ø–æ—Ä—Ç 80 –∑–∞–Ω—è—Ç –≤–Ω–µ—à–Ω–∏–º Nginx)
chmod +x scripts/init-ssl.sh
./scripts/init-ssl.sh

# –¢–æ–ª—å–∫–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è VLESS –∫–ª—é—á–µ–π
chmod +x scripts/generate-keys.sh
./scripts/generate-keys.sh
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
MARZBAN-NGINX/
‚îú‚îÄ‚îÄ docker-compose.yml          # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker Compose (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)
‚îú‚îÄ‚îÄ .env                        # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
‚îú‚îÄ‚îÄ mysql-ultra-minimal.conf    # –£–ª—å—Ç—Ä–∞-–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MySQL 8.0
‚îú‚îÄ‚îÄ xray_config.json           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Xray —Å VLESS Reality
‚îú‚îÄ‚îÄ nginx/
‚îÇ   ‚îú‚îÄ‚îÄ nginx.conf             # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx
‚îÇ   ‚îî‚îÄ‚îÄ conf.d/
‚îÇ       ‚îî‚îÄ‚îÄ marzban.conf       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ Marzban (–±–µ–∑ 80/443)
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ deploy.sh              # –ü–æ–ª–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ init-ssl.sh            # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SSL (standalone)
‚îÇ   ‚îî‚îÄ‚îÄ generate-keys.sh       # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è VLESS Reality –∫–ª—é—á–µ–π
‚îú‚îÄ‚îÄ certbot/                   # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îî‚îÄ‚îÄ vless_client_config.json   # –®–∞–±–ª–æ–Ω –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏

### MySQL –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ `mysql-ultra-minimal.conf`:
- `innodb_buffer_pool_size = 32M` (–≤–º–µ—Å—Ç–æ 128M+)
- `performance_schema = OFF` (—ç–∫–æ–Ω–æ–º–∏—Ç ~400MB)
- `max_connections = 10` (–¥–ª—è –Ω–µ–±–æ–ª—å—à–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏)
- –û—Ç–∫–ª—é—á–µ–Ω—ã –ª–∏—à–Ω–∏–µ –º–æ–¥—É–ª–∏ –∏ –±—É—Ñ–µ—Ä—ã

### Marzban –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- `UVICORN_WORKERS=1` (–æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å)
- `SQLALCHEMY_POOL_SIZE=3` (–º–∏–Ω–∏–º—É–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π)
- –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –∑–∞–¥–∞–Ω–∏–π
- –û—Ç–∫–ª—é—á–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### Docker —Ä–µ—Å—É—Ä—Å–Ω—ã–µ –ª–∏–º–∏—Ç—ã
- MySQL: –ª–∏–º–∏—Ç 256MB RAM
- Marzban: –ª–∏–º–∏—Ç 512MB RAM
- Nginx: –ª–∏–º–∏—Ç 64MB RAM
- Certbot: –ª–∏–º–∏—Ç 64MB RAM

## üîê VLESS Reality –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –ø–æ—Ä—Ç—ã
1. **–ü–æ—Ä—Ç 2053** - Google Reality (`www.google.com`)
2. **–ü–æ—Ä—Ç 2083** - Microsoft Reality (`www.microsoft.com`)
3. **–ü–æ—Ä—Ç 2087** - Cloudflare Reality (`www.cloudflare.com`)

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π
–°–∫—Ä–∏–ø—Ç `generate-keys.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç X25519 –∫–ª—é—á–∏ (private/public)
- –°–æ–∑–¥–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ Short IDs
- –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Xray
- –°–æ–∑–¥–∞–µ—Ç —à–∞–±–ª–æ–Ω –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ñ–∞–π–ª `vless_client_config.json` —Å –≥–æ—Ç–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ç–æ–ª—å–∫–æ –∑–∞–º–µ–Ω–∏—Ç—å `USER_UUID_HERE` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π UUID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ø–∞–Ω–µ–ª–∏ Marzban.

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker compose logs -f

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
docker compose restart

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤
docker compose pull && docker compose up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker compose down

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (—Å –¥–∞–Ω–Ω—ã–º–∏)
docker compose down -v
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose ps

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ)
docker stats

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
curl -I https://botinger789298.work.gd:8080

# –¢–µ—Å—Ç VLESS –ø–æ—Ä—Ç–æ–≤
telnet botinger789298.work.gd 2053
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏
- **Nginx:** `docker compose logs nginx`
- **Marzban:** `docker compose logs marzban`
- **MySQL:** `docker compose logs mysql`
- **Certbot:** `docker compose logs certbot`

### –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã
- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã: `./certbot/conf/live/botinger789298.work.gd/`
- –î–∞–Ω–Ω—ã–µ Marzban: `/var/lib/marzban/`
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö MySQL: `/var/lib/marzban/mysql/`
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MySQL: `./mysql-ultra-minimal.conf`

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### SSL/TLS
- HTTP‚ÜíHTTPS —Ä–µ–¥–∏—Ä–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –¥–µ–ª–∞–µ—Ç—Å—è –≤–Ω–µ—à–Ω–∏–º Nginx (80/443 —É–±—Ä–∞–Ω—ã)
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —à–∏—Ñ—Ä—ã TLS 1.2/1.3
- HSTS –∑–∞–≥–æ–ª–æ–≤–∫–∏
- OCSP Stapling

### VLESS Reality
- –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–¥ –ª–µ–≥–∏—Ç–∏–º–Ω—ã–µ —Å–∞–π—Ç—ã
- –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ DPI –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏
- –°–ª—É—á–∞–π–Ω—ã–µ Short IDs –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –°–µ—Ç–µ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è Docker —Å–µ—Ç—å
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö IP
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∫–ª–∞–º—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
- –°–∫—Ä—ã—Ç–∏–µ –≤–µ—Ä—Å–∏–π —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –ü–û

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env`:

```bash
# –î–æ–º–µ–Ω –∏ SSL
DOMAIN=botinger789298.work.gd
SSL_EMAIL=artur.komarovv@gmail.com
SERVER_IP=31.59.58.96

# –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ Marzban
SUDO_USERNAME=artur789298
SUDO_PASSWORD=WARpteN789298

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
MYSQL_ROOT_PASSWORD=WARpteN789298_root
MYSQL_PASSWORD=WARpteN789298

# SSL –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞ (–≤–∞–∂–Ω–æ!)
UVICORN_SSL_CERTFILE=/etc/letsencrypt/live/botinger789298.work.gd/fullchain.pem
UVICORN_SSL_KEYFILE=/etc/letsencrypt/live/botinger789298.work.gd/privkey.pem

# –£–ª—å—Ç—Ä–∞-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏
SQLALCHEMY_POOL_SIZE=3
SQLALCHEMY_MAX_OVERFLOW=5
UVICORN_WORKERS=1
UVICORN_ACCESS_LOG=false
```

## üì± –î–æ—Å—Ç—É–ø –∫ –ø–∞–Ω–µ–ª–∏

**URL:** https://botinger789298.work.gd:8080/dashboard/

**–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `artur789298`
- –ü–∞—Ä–æ–ª—å: `WARpteN789298`

## ‚ùì –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### üö® 502 Bad Gateway –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ –ø–∞–Ω–µ–ª–∏

**–ü—Ä–∏—á–∏–Ω–∞:** Marzban —Å –≤–µ—Ä—Å–∏–∏ 0.7.0 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ localhost –±–µ–∑ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.env` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ SSL:
   ```bash
   UVICORN_SSL_CERTFILE=/etc/letsencrypt/live/botinger789298.work.gd/fullchain.pem
   UVICORN_SSL_KEYFILE=/etc/letsencrypt/live/botinger789298.work.gd/privkey.pem
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Marzban:
   ```bash
   # –í docker-compose.yml –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å volume:
   - ./certbot/conf:/etc/letsencrypt:ro
   ```

3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –Ω–∞ HTTPS:
   ```bash
   # –í nginx/conf.d/marzban.conf –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   proxy_pass https://marzban:8000;
   proxy_ssl_verify off;
   ```

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Marzban - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   ```bash
   docker compose logs marzban | grep "Uvicorn running"
   # –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: "Uvicorn running on https://0.0.0.0:8000"
   ```

### üîß MySQL –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

**–ü—Ä–∏—á–∏–Ω–∞:** –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è MySQL 8.0.

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `mysql-ultra-minimal.conf`:
   ```bash
   # –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å query_cache_size - —É–¥–∞–ª–µ–Ω–æ –≤ MySQL 8.0
   grep -v "query_cache_size" mysql-ultra-minimal.conf
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ MySQL:
   ```bash
   docker compose logs mysql
   # –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ "unknown variable"
   ```

### üíæ –í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç –±–æ–ª—å—à–µ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤:
   ```bash
   docker stats --format "table {{.Container}}\t{{.MemUsage}}\t{{.MemPerc}}"
   ```

2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ MySQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
   ```bash
   docker compose exec mysql mysql -uroot -pWARpteN789298_root -e "SHOW VARIABLES LIKE 'innodb_buffer_pool_size';"
   # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 33554432 (32MB)
   ```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ª–∏–º–∏—Ç–∞–º–∏:
   ```bash
   docker compose down && docker compose up -d
   ```

### –ü—Ä–æ–±–ª–µ–º—ã —Å SSL
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS
dig botinger789298.work.gd

# –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ (standalone)
./scripts/init-ssl.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
docker compose exec nginx nginx -t
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å VLESS Reality
```bash
# –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π
./scripts/generate-keys.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Xray –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
docker compose exec marzban xray -test -config /usr/local/share/xray/xray_config.json
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MySQL
docker compose exec mysql mysql -uroot -pWARpteN789298_root

# –°–æ–∑–¥–∞–Ω–∏–µ –±–µ–∫–∞–ø–∞
docker compose exec mysql mysqldump -uroot -pWARpteN789298_root marzban > backup.sql
```

### –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤ –ø—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Ä—Ç—ã 80/443 –∑–∞–Ω—è—Ç—ã –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ù–∞–π–¥–∏—Ç–µ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker ps | grep -E ":80|:443"
docker stop CONTAINER_NAME

# –ò–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤–Ω–µ—à–Ω–∏–π nginx
sudo systemctl stop nginx

# –ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Marzban –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ
sudo systemctl start nginx
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker compose logs`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π IP
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ
4. –°–æ–∑–¥–∞–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é:
- **–î–æ 50 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** —Ç–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–¥–µ–∞–ª—å–Ω–∞
- **50-100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** —É–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç—ã MySQL –¥–æ 512MB
- **100+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ PostgreSQL

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤:
```bash
# –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
docker stats

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏—Å–∫–∞
docker system df

# –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
docker system prune -f
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ª—é–±—ã—Ö —Ü–µ–ª–µ–π.

---

**–°–æ–∑–¥–∞–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –≤ –†–æ—Å—Å–∏–∏** üá∑üá∫  
**–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤** ‚ö°